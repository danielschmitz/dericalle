import{Dc as i,Ec as l,U as u,a as o,b as r,j as n,ta as s}from"./chunk-RFMYBWBP.js";var f=()=>{let a=localStorage.getItem("layoutConfig");if(a)try{return JSON.parse(a)}catch(e){console.error("Erro ao carregar a configura\xE7\xE3o persistida:",e)}return{preset:"Aura",primary:"emerald",surface:null,darkTheme:!1,menuMode:"static"}},c=class a{_config={preset:"Aura",primary:"emerald",surface:null,darkTheme:!1,menuMode:"static"};_state={staticMenuDesktopInactive:!1,overlayMenuActive:!1,configSidebarVisible:!1,staticMenuMobileActive:!1,menuHoverActive:!1};layoutConfig=s(this._config);layoutState=s(this._state);configUpdate=new n;overlayOpen=new n;menuSource=new n;resetSource=new n;menuSource$=this.menuSource.asObservable();resetSource$=this.resetSource.asObservable();configUpdate$=this.configUpdate.asObservable();overlayOpen$=this.overlayOpen.asObservable();theme=i(()=>this.layoutConfig()?.darkTheme?"light":"dark");isSidebarActive=i(()=>this.layoutState().overlayMenuActive||this.layoutState().staticMenuMobileActive);isDarkTheme=i(()=>this.layoutConfig().darkTheme);getPrimary=i(()=>this.layoutConfig().primary);getSurface=i(()=>this.layoutConfig().surface);isOverlay=i(()=>this.layoutConfig().menuMode==="overlay");transitionComplete=s(!1);initialized=!1;constructor(){let e=f();if(e)try{e.darkTheme&&document.documentElement.classList.add("app-dark"),this.layoutConfig.set(e)}catch(t){console.error("Erro ao carregar a configura\xE7\xE3o persistida:",t)}l(()=>{let t=this.layoutConfig();t&&(localStorage.setItem("layoutConfig",JSON.stringify(t)),this.onConfigUpdate())}),l(()=>{let t=this.layoutConfig();if(!this.initialized||!t){this.initialized=!0;return}this.handleDarkModeTransition(t)})}handleDarkModeTransition(e){document.startViewTransition?this.startViewTransition(e):(this.toggleDarkMode(e),this.onTransitionEnd())}startViewTransition(e){document.startViewTransition(()=>{this.toggleDarkMode(e)}).ready.then(()=>{this.onTransitionEnd()}).catch(()=>{})}toggleDarkMode(e){(e||this.layoutConfig()).darkTheme?document.documentElement.classList.add("app-dark"):document.documentElement.classList.remove("app-dark")}onTransitionEnd(){this.transitionComplete.set(!0),setTimeout(()=>{this.transitionComplete.set(!1)})}onMenuToggle(){this.isOverlay()&&(this.layoutState.update(e=>r(o({},e),{overlayMenuActive:!this.layoutState().overlayMenuActive})),this.layoutState().overlayMenuActive&&this.overlayOpen.next(null)),this.isDesktop()?this.layoutState.update(e=>r(o({},e),{staticMenuDesktopInactive:!this.layoutState().staticMenuDesktopInactive})):(this.layoutState.update(e=>r(o({},e),{staticMenuMobileActive:!this.layoutState().staticMenuMobileActive})),this.layoutState().staticMenuMobileActive&&this.overlayOpen.next(null))}isDesktop(){return window.innerWidth>991}isMobile(){return!this.isDesktop()}onConfigUpdate(){this._config=o({},this.layoutConfig()),this.configUpdate.next(this.layoutConfig())}onMenuStateChange(e){this.menuSource.next(e)}reset(){this.resetSource.next(!0)}static \u0275fac=function(t){return new(t||a)};static \u0275prov=u({token:a,factory:a.\u0275fac,providedIn:"root"})};export{c as a};
