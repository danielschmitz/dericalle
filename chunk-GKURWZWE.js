import{b as T,d as N}from"./chunk-KEM3NG7E.js";import{m as w}from"./chunk-7KVBVPRV.js";import{Ha as I,Ka as E,Ma as M,Ra as x,mb as k,ra as S,sb as F}from"./chunk-SNNPRX4A.js";import{$ as m,Db as a,Eb as i,Fb as f,Lb as g,Qc as _,Ua as o,Yb as s,Zb as h,ac as C,bc as v,cc as b,fb as u,mb as y,qa as c,ub as d}from"./chunk-EIGNSBGS.js";function O(r,e){r&1&&(a(0,"small",8),s(1,"Name is required."),i())}var D=class r{service=m(T);message=m(S);categoryId=null;onSave=new c;onCancel=new c;category={name:""};submitted=!1;loading=!1;ngOnInit(){this.categoryId&&(this.loading=!0,this.service.getById(this.categoryId).subscribe({next:e=>{this.category=e,this.loading=!1},error:e=>{this.message.add({severity:"error",summary:"Error",detail:e.error.message}),this.loading=!1}}))}saveCategory(){this.submitted=!0,this.category.name.trim()&&(this.loading=!0,this.category.id?this.service.update(this.category.id,this.category).subscribe({next:()=>{this.message.add({severity:"success",summary:"Success",detail:"Category updated successfully"}),this.loading=!1,this.onSave.emit()},error:e=>{this.message.add({severity:"error",summary:"Error",detail:e.error.message}),this.loading=!1}}):this.service.create(this.category).subscribe({next:()=>{this.message.add({severity:"success",summary:"Success",detail:"Category created successfully"}),this.loading=!1,this.onSave.emit()},error:e=>{this.message.add({severity:"error",summary:"Error",detail:e.error.message}),this.loading=!1}}))}cancel(){this.onCancel.emit()}static \u0275fac=function(n){return new(n||r)};static \u0275cmp=u({type:r,selectors:[["app-category-form"]],inputs:{categoryId:"categoryId"},outputs:{onSave:"onSave",onCancel:"onCancel"},decls:13,vars:4,consts:[[1,"card"],[1,"flex","flex-col","gap-6"],["for","name",1,"block","font-bold","mb-3"],["type","text","pInputText","","id","name","required","","autofocus","",2,"width","100%",3,"ngModelChange","ngModel"],["class","text-red-500",4,"ngIf"],[1,"flex","justify-end","gap-2"],["label","Cancel","icon","pi pi-times","outlined","",3,"click"],["label","Save","icon","pi pi-check",3,"click","loading"],[1,"text-red-500"]],template:function(n,t){n&1&&(a(0,"div",0)(1,"h5"),s(2),i(),a(3,"div",1)(4,"div")(5,"label",2),s(6,"Name"),i(),a(7,"input",3),b("ngModelChange",function(l){return v(t.category.name,l)||(t.category.name=l),l}),i(),y(8,O,2,0,"small",4),i(),a(9,"div",5)(10,"p-button",6),g("click",function(){return t.cancel()}),i(),a(11,"p-button",7),g("click",function(){return t.saveCategory()}),i()()()(),f(12,"p-toast")),n&2&&(o(2),h(t.categoryId?"Edit Category":"Create Category"),o(5),C("ngModel",t.category.name),o(),d("ngIf",t.submitted&&!t.category.name),o(3),d("loading",t.loading))},dependencies:[N,_,k,I,E,x,M,F,w],encapsulation:2})};export{D as a};
