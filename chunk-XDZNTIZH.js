import{b as z,d as Q}from"./chunk-KEM3NG7E.js";import"./chunk-7MJ4RZQ5.js";import{g as P}from"./chunk-IVHQ22ZI.js";import"./chunk-PCFVAML2.js";import"./chunk-YQN2QFTW.js";import{a as K}from"./chunk-2UXFLB6D.js";import{m as q,o as J}from"./chunk-7KVBVPRV.js";import{A as G,L as W,O as j,P as A,S as B,T as L,y as N}from"./chunk-WNHKCG4Z.js";import{mb as D,na as M,ra as H,sb as O}from"./chunk-SNNPRX4A.js";import{$ as _,$a as T,Db as i,E as S,Eb as r,Fb as l,Jb as f,K as E,Lb as h,Mb as d,Ua as s,Xb as V,Yb as g,Zb as x,ac as k,bc as F,cc as R,ec as w,fb as I,ha as m,ia as c,mb as b,n as v,sc as u,ub as p}from"./chunk-EIGNSBGS.js";var X=()=>["name","country.name","representative.name","status"],Y=()=>[10,20,30];function Z(n,e){if(n&1){let t=f();i(0,"p-button",8),h("click",function(){m(t);let a=d();return c(a.newCategory())}),r(),i(1,"p-button",9),h("click",function(){m(t);let a=d();return c(a.deleteSelectedCategories())}),r()}if(n&2){let t=d();s(),p("disabled",t.selectedCategories.length==0)}}function $(n,e){n&1&&l(0,"p-button",10)}function ee(n,e){if(n&1){let t=f();i(0,"div",11)(1,"h5",12),g(2,"Categories"),r(),i(3,"p-iconfield"),l(4,"p-inputicon",13),i(5,"input",14),h("input",function(a){m(t);let y=d(),C=V(6);return c(y.onGlobalFilter(C,a))}),r()()()}}function te(n,e){n&1&&(i(0,"tr")(1,"th",15),l(2,"p-tableHeaderCheckbox"),r(),i(3,"th",15),g(4,"Id"),r(),i(5,"th",16),g(6," Name "),l(7,"p-sortIcon",17),r(),l(8,"th",18),r())}function ie(n,e){if(n&1){let t=f();i(0,"tr")(1,"td"),l(2,"p-tableCheckbox",19),r(),i(3,"td"),g(4),r(),i(5,"td"),g(6),r(),i(7,"td")(8,"p-button",20),h("click",function(){let a=m(t).$implicit,y=d();return c(y.editCategory(a))}),r()()()}if(n&2){let t=e.$implicit;s(2),p("value",t),s(2),x(t.id),s(2),x(t.name),s(2),p("rounded",!0)("outlined",!0)}}var U=class n{service=_(z);message=_(H);confirmationService=_(M);router=_(P);categories=T([]);selectedCategories=[];loading=!1;cols=[{field:"id",header:"Id",customExportHeader:"id"},{field:"name",header:"name"}];ngOnInit(){this.fetchCategories()}fetchCategories(){this.loading=!0,this.service.getAll().subscribe({next:e=>{this.loading=!1,this.categories.set(e)},error:e=>{this.message.add({severity:"error",summary:"Error",detail:e.error.message}),this.loading=!1}})}onGlobalFilter(e,t){e.filterGlobal(t.target.value,"contains")}newCategory(){this.router.navigate(["/categories/create"])}deleteCategory(e){throw new Error("Method not implemented.")}editCategory(e){this.router.navigate(["/categories/edit",e.id])}deleteSelectedCategories(){this.confirmationService.confirm({message:"Are you sure you want to delete the selected categories?",header:"Confirm",icon:"pi pi-exclamation-triangle",accept:()=>{this.loading=!0,v(this.selectedCategories).pipe(S(e=>this.service.delete(e.id)),E(()=>{this.fetchCategories(),this.selectedCategories=[],this.loading=!1,this.message.add({severity:"success",summary:"Success",detail:"Categories deleted successfully"})})).subscribe({error:e=>{this.message.add({severity:"error",summary:"Error",detail:e.error.message})}})}})}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=I({type:n,selectors:[["app-categories"]],decls:15,vars:12,consts:[["start",""],["end",""],["dt",""],["caption",""],["header",""],["body",""],["styleClass","mb-6"],["dataKey","id","currentPageReportTemplate","Showing {first} to {last} of {totalRecords} products",3,"selectionChange","loading","value","rows","columns","paginator","globalFilterFields","selection","rowHover","showCurrentPageReport","rowsPerPageOptions"],["label","New","icon","pi pi-plus","severity","secondary",1,"mr-2",3,"click"],["severity","secondary","label","Delete","icon","pi pi-trash","outlined","",3,"click","disabled"],["label","Export","icon","pi pi-upload","severity","secondary"],[1,"flex","items-center","justify-between"],[1,"m-0"],["styleClass","pi pi-search"],["pInputText","","type","text","placeholder","Search...",3,"input"],[2,"width","3rem"],["pSortableColumn","name"],["field","name"],[2,"width","5rem"],[3,"value"],["icon","pi pi-pencil",1,"mr-2",3,"click","rounded","outlined"]],template:function(t,o){if(t&1){let a=f();i(0,"p-toolbar",6),b(1,Z,2,1,"ng-template",null,0,u)(3,$,1,0,"ng-template",null,1,u),r(),i(5,"p-table",7,2),R("selectionChange",function(C){return m(a),F(o.selectedCategories,C)||(o.selectedCategories=C),c(C)}),b(7,ee,6,0,"ng-template",null,3,u)(9,te,9,0,"ng-template",null,4,u)(11,ie,9,5,"ng-template",null,5,u),r(),l(13,"p-toast")(14,"p-confirmdialog")}t&2&&(s(5),p("loading",o.loading)("value",o.categories())("rows",10)("columns",o.cols)("paginator",!0)("globalFilterFields",w(10,X)),k("selection",o.selectedCategories),p("rowHover",!0)("showCurrentPageReport",!0)("rowsPerPageOptions",w(11,Y)))},dependencies:[Q,D,K,N,G,O,W,j,A,B,L,q,J],encapsulation:2})};export{U as CategoriesComponent};
